<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SkyBook – Vols pas chers</title>
  <link rel="stylesheet" href="style.css">
  <script src="//unpkg.com/three/build/three.min.js"></script>
  <script src="//unpkg.com/globe.gl"></script>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
  <header>
    <div class="header-top">
      <div class="logo">✈️ SkyBook</div>
      <nav>
        <a href="#">Aide</a>
        <a href="#">❤️</a>
        <a href="#" onclick="showLogin()">Se connecter</a>
      </nav>
    </div>
    <div class="tabs">
      <button class="active">Vols</button>
    </div>
    <h1>Des millions de vols pas chers. Une simple recherche.</h1>
  </header>

  <!-- LOGIN MODAL -->
  <div id="loginModal" class="modal">
    <div class="modal-content">
      <h2>Se connecter</h2>
      <input type="email" id="loginEmail" placeholder="Email">
      <input type="password" id="loginPassword" placeholder="Mot de passe">
      <button onclick="login()">Connexion</button>
      <p>Pas de compte? <a href="#" onclick="showRegister()">Créer un compte</a></p>
      <button class="close-btn" onclick="closeModal('loginModal')">✕</button>
    </div>
  </div>

  <!-- REGISTER MODAL -->
  <div id="registerModal" class="modal">
    <div class="modal-content">
      <h2>Créer un compte</h2>
      <input type="text" id="regName" placeholder="Nom">
      <input type="email" id="regEmail" placeholder="Email">
      <input type="password" id="regPassword" placeholder="Mot de passe">
      <button onclick="register()">S'inscrire</button>
      <p>Déjà un compte? <a href="#" onclick="showLogin()">Se connecter</a></p>
      <button class="close-btn" onclick="closeModal('registerModal')">✕</button>
    </div>
  </div>

  <!-- SEARCH SECTION (Step 1) -->
  <section id="searchPage" class="search-box">
    <div class="trip-type">
      <label><input type="radio" name="tripType" value="oneway" checked> Aller simple</label>
      <label><input type="radio" name="tripType" value="return"> Aller-retour</label>
    </div>

    <div class="search-form">
      <div class="input-group">
        <label for="fromCity">De</label>
        <input id="fromCity" type="text" placeholder="e.g. Rabat (RBA)" autocomplete="off">
        <div id="fromList" class="suggestions" aria-live="polite"></div>
      </div>

      <button class="switch-btn" onclick="switchCities()">↔️</button>

      <div class="input-group">
        <label for="toCity">Vers</label>
        <input id="toCity" type="text" placeholder="e.g. Marseille (MRS)" autocomplete="off">
        <div id="toList" class="suggestions" aria-live="polite"></div>
      </div>

      <div class="input-group">
        <label for="departDate">Départ</label>
        <input id="departDate" type="date">
      </div>

      <div class="input-group" id="returnDateGroup" style="display: none;">
        <label for="returnDate">Retour</label>
        <input id="returnDate" type="date">
      </div>

      <div class="input-group">
        <label for="travelers">Voyageurs et classe</label>
        <select id="travelers">
          <option>1 Adulte, Économie</option>
          <option>2 Adultes, Économie</option>
          <option>1 Adulte, Business</option>
          <option>2 Adultes, Business</option>
        </select>
      </div>

      <button class="search-btn" onclick="searchFlights()">Rechercher</button>
    </div>

    <div class="options">
      <label><input type="checkbox" id="nearbyFrom"> Ajouter des aéroports à proximité</label>
      <label><input type="checkbox" id="nearbyTo"> Ajouter des aéroports à proximité</label>
      <label><input type="checkbox" id="directOnly"> Vols directs</label>
    </div>
  </section>

  <!-- LOADING ANIMATION WITH 3D GLOBE -->
  <div id="loadingAnimation" class="loading" style="display: none;">
    <div class="globe-container">
      <div id="globeViz"></div>
    </div>
    <p id="loadingText">Recherche en cours...</p>
  </div>

  <!-- FLIGHT RESULTS (Step 2) -->
  <section id="flightsPage" class="page" style="display: none;">
    <h2>Résultats des vols</h2>
    <div id="flightResults"></div>
    <button onclick="backToSearch()" class="back-btn">← Retour</button>
  </section>

  <!-- SEAT SELECTION (Step 3) -->
  <section id="seatPage" class="page" style="display: none;">
    <h2>Sélectionnez votre siège</h2>
    <div class="plane-layout">
      <div class="nose">✈️ Avant</div>
      <div class="cabin">
        <div class="aisle-labels">
          <span>A</span><span>B</span><span>C</span><span class="aisle"></span><span>D</span><span>E</span><span>F</span>
        </div>
        <div id="seats"></div>
      </div>
      <div class="emergency-exit">Sortie de secours</div>
      <div class="emergency-exit">Sortie de secours</div>
      <div class="tail">Arrière ✈️</div>
    </div>
    <p id="seatPrice">Prix du siège sélectionné : €0</p>
    <button onclick="goToLuggage()">Continuer vers les bagages</button>
    <button onclick="backToFlights()" class="back-btn">← Retour</button>
  </section>

  <!-- LUGGAGE SELECTION (Step 4) -->
  <section id="luggagePage" class="page" style="display: none;">
    <h2>Ajouter des bagages</h2>
    <div class="luggage-options">
      <label>Bagage cabine (Gratuit)</label>
      <input type="number" id="carryOn" min="0" max="2" value="1">

      <label>Bagages en soute (€30 chacun)</label>
      <input type="number" id="checkedBags" min="0" max="3" value="0">
    </div>
    <p id="luggageCost">Coût des bagages : €0</p>
    <button onclick="goToDetails()">Continuer vers les détails</button>
    <button onclick="backToSeats()" class="back-btn">← Retour</button>
  </section>

  <!-- PASSENGER DETAILS (Step 5) -->
  <section id="detailsPage" class="page" style="display: none;">
    <h2>Détails du passager</h2>
    <input type="text" id="firstName" placeholder="Prénom" required>
    <input type="text" id="lastName" placeholder="Nom de famille" required>
    <input type="email" id="email" placeholder="Email" required>
    <input type="text" id="passport" placeholder="Numéro de passeport" required>
    <button onclick="goToPayment()">Continuer vers le paiement</button>
    <button onclick="backToLuggage()" class="back-btn">← Retour</button>
  </section>

  <!-- PAYMENT PAGE (Step 6) -->
  <section id="paymentPage" class="page" style="display: none;">
    <h2>Détails du paiement</h2>
    <div id="cartSummary" class="cart-details">
      <h3>Résumé de votre réservation</h3>
      <ul>
        <li id="cartFlight"></li>
        <li id="cartDate"></li>
        <li id="cartPassenger"></li>
        <li id="cartSeat"></li>
        <li id="cartLuggage"></li>
        <li id="cartTotal"></li>
      </ul>
    </div>
    <form id="paymentForm" novalidate>
      <input type="text" id="cardName" placeholder="Nom du titulaire de la carte" required>
      <input type="text" id="cardNumber" placeholder="Numéro de carte (16 chiffres)" maxlength="19" required>
      <div class="row">
        <input type="text" id="expDate" placeholder="MM/AA" maxlength="5" required>
        <input type="text" id="cvv" placeholder="CVV" maxlength="3" required>
      </div>
      <button type="submit">Payer maintenant</button>
    </form>
    <button onclick="backToDetails()" class="back-btn">← Retour</button>
  </section>

  <script src="script.js"></script>
</body>
</html>